/* esm.sh - esbuild bundle(typescript-parsec@0.3.2) deno production */
var ve=Object.create;var V=Object.defineProperty;var he=Object.getOwnPropertyDescriptor;var Te=Object.getOwnPropertyNames;var xe=Object.getPrototypeOf,ke=Object.prototype.hasOwnProperty;var p=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var ge=(e,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Te(r))!ke.call(e,s)&&s!==n&&V(e,s,{get:()=>r[s],enumerable:!(t=he(r,s))||t.enumerable});return e};var be=(e,r,n)=>(n=e!=null?ve(xe(e)):{},ge(r||!e||!e.__esModule?V(n,"default",{value:e,enumerable:!0}):n,e));var A=p(d=>{"use strict";var W=d&&d.__extends||function(){var e=function(r,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var u in s)s.hasOwnProperty(u)&&(t[u]=s[u])},e(r,n)};return function(r,n){e(r,n);function t(){this.constructor=r}r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}}();Object.defineProperty(d,"__esModule",{value:!0});d.buildLexer=d.extractByTokenRange=d.extractByPositionRange=d.TokenRangeError=d.TokenError=void 0;function F(e){return e===void 0?"<END-OF-FILE>":JSON.stringify(e)}var X=function(e){W(r,e);function r(n,t){var s=e.call(this,F(n)+": "+t)||this;return s.pos=n,s.errorMessage=t,s}return r}(Error);d.TokenError=X;var Ee=function(e){W(r,e);function r(n,t,s){var u=e.call(this,F(n)+" - "+F(t)+": "+s)||this;return u.first=n,u.next=t,u.errorMessage=s,u}return r}(Error);d.TokenRangeError=Ee;function Y(e,r,n){var t=r===void 0?e.length:r.index,s=n===void 0?e.length:n.index;return t>=s?"":e.substring(t,s)}d.extractByPositionRange=Y;function ye(e,r,n){return Y(e,r===void 0?void 0:r.pos,n===void 0?void 0:n.pos)}d.extractByTokenRange=ye;var me=function(){function e(r,n,t,s,u,o){this.lexer=r,this.input=n,this.kind=t,this.text=s,this.pos=u,this.keep=o}return Object.defineProperty(e.prototype,"next",{get:function(){return this.nextToken===void 0&&(this.nextToken=this.lexer.parseNextAvailable(this.input,this.pos.index+this.text.length,this.pos.rowEnd,this.pos.columnEnd),this.nextToken===void 0&&(this.nextToken=null)),this.nextToken===null?void 0:this.nextToken},enumerable:!1,configurable:!0}),e}(),qe=function(){function e(r){this.rules=r;for(var n=0,t=this.rules;n<t.length;n++){var s=t[n];if(s[1].source[0]!=="^")throw new Error('Regular expression patterns for a tokenizer should start with "^": '+s[1].source);if(!s[1].global)throw new Error("Regular expression patterns for a tokenizer should be global: "+s[1].source)}}return e.prototype.parse=function(r){return this.parseNextAvailable(r,0,1,1)},e.prototype.parseNext=function(r,n,t,s){if(n!==r.length){for(var u=r.substr(n),o,a=0,f=this.rules;a<f.length;a++){var i=f[a],b=i[0],v=i[1],_=i[2];if(v.lastIndex=0,v.test(u)){for(var y=u.substr(0,v.lastIndex),w=t,m=s,B=0,K=y;B<K.length;B++){var pe=K[B];switch(pe){case"\r":break;case`
`:w++,m=1;break;default:m++}}var Q=new me(this,r,_,y,{index:n,rowBegin:t,columnBegin:s,rowEnd:w,columnEnd:m},b);(o===void 0||o.text.length<Q.text.length)&&(o=Q)}}if(o===void 0)throw new X({index:n,rowBegin:t,columnBegin:s,rowEnd:t,columnEnd:s},"Unable to tokenize the rest of the input: "+r.substr(n));return o}},e.prototype.parseNextAvailable=function(r,n,t,s){for(var u;;){if(u=this.parseNext(r,u===void 0?n:u.pos.index+u.text.length,u===void 0?t:u.pos.rowEnd,u===void 0?s:u.pos.columnEnd),u===void 0)return;if(u.keep)return u}},e}();function Oe(e){return new qe(e)}d.buildLexer=Oe});var E=p(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.unableToConsumeToken=x.resultOrError=x.betterError=void 0;function Pe(e,r){return e===void 0?r:r===void 0||e.pos===void 0?e:r.pos===void 0||e.pos.index<r.pos.index?r:(e.pos.index>r.pos.index,e)}x.betterError=Pe;function _e(e,r,n){return n?{candidates:e,successful:!0,error:r}:{successful:!1,error:r}}x.resultOrError=_e;function we(e){return{kind:"Error",pos:e===void 0?void 0:e.pos,message:"Unable to consume token: "+(e===void 0?"<END-OF-FILE>":e.text)}}x.unableToConsumeToken=we});var C=p(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.tok=k.str=k.nil=void 0;var Z=E();function Re(){return{parse:function(e){return{candidates:[{firstToken:e,nextToken:e,result:void 0}],successful:!0,error:void 0}}}}k.nil=Re;function je(e){return{parse:function(r){return r===void 0||r.text!==e?{successful:!1,error:Z.unableToConsumeToken(r)}:{candidates:[{firstToken:r,nextToken:r.next,result:r}],successful:!0,error:void 0}}}}k.str=je;function Ie(e){return{parse:function(r){return r===void 0||r.kind!==e?{successful:!1,error:Z.unableToConsumeToken(r)}:{candidates:[{firstToken:r,nextToken:r.next,result:r}],successful:!0,error:void 0}}}}k.tok=Ie});var j=p(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.seq=void 0;var $=E();function Me(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return{parse:function(n){for(var t,s=[{firstToken:n,nextToken:n,result:[]}],u=0,o=e;u<o.length;u++){var a=o[u];if(s.length===0)break;var f=s;s=[];for(var i=0,b=f;i<b.length;i++){var v=b[i],_=a.parse(v.nextToken);if(t=$.betterError(t,_.error),_.successful)for(var y=0,w=_.candidates;y<w.length;y++){var m=w[y];s.push({firstToken:v.firstToken,nextToken:m.nextToken,result:v.result.concat([m.result])})}}}return $.resultOrError(s,t,s.length!==0)}}}R.seq=Me});var z=p(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.alt=void 0;var ee=E();function Le(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return{parse:function(n){for(var t,s=[],u=!1,o=0,a=e;o<a.length;o++){var f=a[o],i=f.parse(n);t=ee.betterError(t,i.error),i.successful&&(s=s.concat(i.candidates),u=!0)}return ee.resultOrError(s,t,u)}}}I.alt=Le});var re=p(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.opt_sc=q.opt=void 0;var Ne=z(),Se=C();function Be(e){return Ne.alt(e,Se.nil())}q.opt=Be;function Fe(e){return{parse:function(r){var n=e.parse(r);return n.successful?n:{candidates:[{firstToken:r,nextToken:r,result:void 0}],successful:!0,error:n.error}}}}q.opt_sc=Fe});var J=p(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.kmid=T.kright=T.kleft=T.apply=void 0;var D=j();function M(e,r){return{parse:function(n){var t=e.parse(n);return t.successful?{candidates:t.candidates.map(function(s){return{firstToken:n,nextToken:s.nextToken,result:r(s.result,[n,s.nextToken])}}),successful:!0,error:t.error}:t}}}T.apply=M;function Ae(e,r){return M(D.seq(e,r),function(n){return n[0]})}T.kleft=Ae;function Ce(e,r){return M(D.seq(e,r),function(n){return n[1]})}T.kright=Ce;function ze(e,r,n){return M(D.seq(e,r,n),function(t){return t[1]})}T.kmid=ze});var ue=p(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.lrec_sc=c.lrec=c.list_sc=c.list=c.repr=c.rep_sc=c.rep=void 0;var N=J(),L=E(),O=j();function U(e){var r=ne(e);return{parse:function(n){var t=r.parse(n);return t.successful?{candidates:t.candidates.reverse(),successful:!0,error:t.error}:t}}}c.rep=U;function G(e){return{parse:function(r){for(var n,t=[{firstToken:r,nextToken:r,result:[]}];;){var s=t;t=[];for(var u=0,o=s;u<o.length;u++){var a=o[u],f=e.parse(a.nextToken);if(n=L.betterError(n,f.error),f.successful)for(var i=0,b=f.candidates;i<b.length;i++){var v=b[i];v.nextToken!==a.nextToken&&t.push({firstToken:a.firstToken,nextToken:v.nextToken,result:a.result.concat([v.result])})}}if(t.length===0){t=s;break}}return L.resultOrError(t,n,!0)}}}c.rep_sc=G;function ne(e){return{parse:function(r){for(var n,t=[{firstToken:r,nextToken:r,result:[]}],s=0;s<t.length;s++){var u=t[s],o=e.parse(u.nextToken);if(n=L.betterError(n,o.error),o.successful)for(var a=0,f=o.candidates;a<f.length;a++){var i=f[a];i.nextToken!==u.nextToken&&t.push({firstToken:u.firstToken,nextToken:i.nextToken,result:u.result.concat([i.result])})}}return L.resultOrError(t,n,!0)}}}c.repr=ne;function te(e){return[e[0]].concat(e[1].map(function(r){return r[1]}))}function De(e,r){return N.apply(O.seq(e,U(O.seq(r,e))),te)}c.list=De;function Je(e,r){return N.apply(O.seq(e,G(O.seq(r,e))),te)}c.list_sc=Je;function se(e){return function(r){for(var n=r[0],t=0,s=r[1];t<s.length;t++){var u=s[t];n=e(n,u)}return n}}function Ue(e,r,n){return N.apply(O.seq(e,U(r)),se(n))}c.lrec=Ue;function Ge(e,r,n){return N.apply(O.seq(e,G(r)),se(n))}c.lrec_sc=Ge});var oe=p(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.amb=void 0;function He(e){return{parse:function(r){var n=e.parse(r);if(!n.successful)return n;for(var t=new Map,s=0,u=n.candidates;s<u.length;s++){var o=u[s],a=t.get(o.nextToken);a===void 0?t.set(o.nextToken,[o]):a.push(o)}return{candidates:Array.from(t.values()).map(function(f){return{firstToken:f[0].firstToken,nextToken:f[0].nextToken,result:f.map(function(i){return i.result})}}),successful:!0,error:n.error}}}}S.amb=He});var ie=p(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.errd=P.err=void 0;function Ke(e,r){return{parse:function(n){var t=e.parse(n);return t.successful?t:{successful:!1,error:{kind:"Error",pos:t.error.pos,message:r}}}}}P.err=Ke;function Qe(e,r,n){return{parse:function(t){var s=e.parse(t);return s.successful?s:{successful:!0,candidates:[{firstToken:t,nextToken:t,result:n}],error:{kind:"Error",pos:s.error.pos,message:r}}}}}P.errd=Qe});var fe=p(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.expectSingleResult=g.expectEOF=g.rule=void 0;var H=A(),ae=E(),Ve=function(){function e(){}return e.prototype.setPattern=function(r){this.parser=r},e.prototype.parse=function(r){if(this.parser===void 0)throw new Error("Rule has not been initialized. setPattern is required before calling parse.");return this.parser.parse(r)},e}();function We(){return new Ve}g.rule=We;function Xe(e){if(!e.successful)return e;if(e.candidates.length===0)return{successful:!1,error:{kind:"Error",pos:void 0,message:"No result is returned."}};for(var r=[],n=e.error,t=0,s=e.candidates;t<s.length;t++){var u=s[t];u.nextToken===void 0?r.push(u):n=ae.betterError(n,{kind:"Error",pos:u.nextToken===void 0?void 0:u.nextToken.pos,message:'The parser cannot reach the end of file, stops at "'+u.nextToken.text+'" at position '+JSON.stringify(u.nextToken.pos)+"."})}return ae.resultOrError(r,n,r.length!==0)}g.expectEOF=Xe;function Ye(e){if(!e.successful)throw new H.TokenError(e.error.pos,e.error.message);if(e.candidates.length===0)throw new H.TokenError(void 0,"No result is returned.");if(e.candidates.length!==1)throw new H.TokenError(void 0,"Multiple results are returned.");return e.candidates[0].result}g.expectSingleResult=Ye});var le=p(l=>{"use strict";var Ze=l&&l.__createBinding||(Object.create?function(e,r,n,t){t===void 0&&(t=n),Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[n]}})}:function(e,r,n,t){t===void 0&&(t=n),e[t]=r[n]}),h=l&&l.__exportStar||function(e,r){for(var n in e)n!=="default"&&!r.hasOwnProperty(n)&&Ze(r,e,n)};Object.defineProperty(l,"__esModule",{value:!0});h(A(),l);h(E(),l);h(C(),l);h(j(),l);h(z(),l);h(re(),l);h(ue(),l);h(J(),l);h(oe(),l);h(ie(),l);h(fe(),l)});var de=be(le()),pr=!0,{expectSingleResult:vr,expectEOF:hr,rule:Tr,errd:xr,err:kr,amb:gr,kmid:br,kright:Er,kleft:yr,apply:mr,lrec_sc:qr,lrec:Or,list_sc:Pr,list:_r,repr:wr,rep_sc:Rr,rep:jr,opt_sc:Ir,opt:Mr,alt:Lr,seq:Nr,tok:Sr,str:Br,nil:Fr,unableToConsumeToken:Ar,resultOrError:Cr,betterError:zr,buildLexer:Dr,extractByTokenRange:Jr,extractByPositionRange:Ur,TokenRangeError:Gr,TokenError:Hr}=de,{default:ce,...$e}=de,Kr=ce!==void 0?ce:$e;export{Hr as TokenError,Gr as TokenRangeError,pr as __esModule,Lr as alt,gr as amb,mr as apply,zr as betterError,Dr as buildLexer,Kr as default,kr as err,xr as errd,hr as expectEOF,vr as expectSingleResult,Ur as extractByPositionRange,Jr as extractByTokenRange,yr as kleft,br as kmid,Er as kright,_r as list,Pr as list_sc,Or as lrec,qr as lrec_sc,Fr as nil,Mr as opt,Ir as opt_sc,jr as rep,Rr as rep_sc,wr as repr,Cr as resultOrError,Tr as rule,Nr as seq,Br as str,Sr as tok,Ar as unableToConsumeToken};
